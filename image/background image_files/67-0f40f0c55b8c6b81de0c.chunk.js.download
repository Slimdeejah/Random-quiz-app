(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1344:function(e,t,n){"use strict";n.r(t);n(771);var o=n(4),_=n(13),i=n(74),a=n.n(i),s=n(2);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(t){var _=h(this).constructor;n=Reflect.construct(o,arguments,_)}else n=o.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,n,o,_=u(i);function i(){var e;r(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=_.call.apply(_,[this].concat(n))).recaptchaCallback=function(){var t={sitekey:e.siteKeyValue};"invisible"===e.element.dataset.captchaType&&(t.size="invisible",t.badge="inline");var n=grecaptcha.render(e.element,t);e.element.dataset.recaptchaId=n},e.rescaleCaptcha=function(){var t=e.element.parentNode.clientWidth,n=t<302?t/302:1;e.element.style.transform="scale(".concat(n,")"),e.element.style.transformOrigin="0 0"},e}return t=i,(n=[{key:"connect",value:function(){Object(s.K)()||this.initRecaptcha()}},{key:"disconnect",value:function(){"invisible"!==this.element.dataset.captchaType&&window.removeEventListener("resize",this.rescaleCaptcha)}},{key:"initRecaptcha",value:function(){var e=this;window.recaptchaCallback=this.recaptchaCallback,"undefined"!==typeof grecaptcha?recaptchaCallback():a()("https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit"),"invisible"!==this.element.dataset.captchaType&&(window.addEventListener("resize",this.rescaleCaptcha),setTimeout((function(){e.rescaleCaptcha()})))}}])&&c(t.prototype,n),o&&c(t,o),i}(_.b);p.values={siteKey:String};var d=n(11),b=n(511),E=n(512),g=n(9),O=n.n(g),P=n(81);function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(t){var _=y(this).constructor;n=Reflect.construct(o,arguments,_)}else n=o.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(i,e);var t,n,o,_=M(i);function i(){var e;T(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=_.call.apply(_,[this].concat(n))).connectFacebook=function(){e.facebook.connect()},e.connectGoogle=function(){e.google.connect()},e}return t=i,(n=[{key:"connect",value:function(){this.connectType=this.element.dataset.connectType,O.a.set("sessionViewActivity",Object(P.f)()),O.a.set("sessionDownloadActivity",Object(P.d)()),this.facebook=new b.a({buttonTarget:this.fbButtonTarget,textTarget:this.hasFbTextTarget?this.fbTextTarget:null,csrfToken:this.csrfToken,omniauthToken:this.element.dataset.omniauthToken}),this.google=new E.a({buttonTarget:this.googleButtonTarget,textTarget:this.hasGoogleTextTarget?this.googleTextTarget:null,csrfToken:this.csrfToken,omniauthToken:this.element.dataset.omniauthToken})}}])&&m(t.prototype,n),o&&m(t,o),i}(d.a);v.targets=["fbButton","fbText","googleButton","googleText"],Promise.resolve().then(n.bind(null,772)),Promise.resolve().then(n.bind(null,1373)),Promise.resolve().then(n.bind(null,778)),n.e(241).then(n.bind(null,1475)),n.e(186).then(n.bind(null,1476)),n.e(232).then(n.bind(null,1477)),n.e(165).then(n.bind(null,1478)),Promise.all([n.e(12),n.e(194)]).then(n.bind(null,43)).then((function(e){o.default.register("ez-modal",e.default)})),Promise.all([n.e(7),n.e(11),n.e(14),n.e(15),n.e(100)]).then(n.bind(null,1479)).then((function(e){o.default.register("registrations-account-form",e.default)})),Promise.all([n.e(7),n.e(11),n.e(14),n.e(15),n.e(154)]).then(n.bind(null,1480)).then((function(e){o.default.register("registrations-details-form",e.default)})),Promise.all([n.e(7),n.e(11),n.e(14),n.e(15),n.e(192)]).then(n.bind(null,1481)).then((function(e){o.default.register("login-form",e.default)})),Promise.all([n.e(7),n.e(11),n.e(14),n.e(15),n.e(214)]).then(n.bind(null,1482)).then((function(e){o.default.register("reset-password-form",e.default)})),Promise.all([n.e(12),n.e(17),n.e(231)]).then(n.bind(null,1483)).then((function(e){o.default.register("signup-modal",e.default)})),Promise.all([n.e(12),n.e(17),n.e(234)]).then(n.bind(null,1484)).then((function(e){o.default.register("signup-survey-modal",e.default)})),Promise.all([n.e(7),n.e(11),n.e(14),n.e(15),n.e(233)]).then(n.bind(null,1485)).then((function(e){o.default.register("signup-survey-form",e.default)})),Promise.all([n.e(12),n.e(17),n.e(166)]).then(n.bind(null,1486)).then((function(e){o.default.register("email-verification-modal",e.default)})),Promise.all([n.e(12),n.e(13),n.e(17),n.e(167)]).then(n.bind(null,1487)).then((function(e){o.default.register("email-verified-modal",e.default)})),n.e(180).then(n.bind(null,1488)).then((function(e){o.default.register("google-one-tap",e.default)})),o.default.register("recaptcha",p),o.default.register("social-session-buttons",v)},1373:function(e,t,n){"use strict";n.r(t);n(775),n(410),n(776),n(777)},410:function(e,t,n){"use strict";n(774)},51:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return f}));var o=n(22),_=n(20),i=n(9),a=n.n(i);function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.querySelector('[data-social-session-buttons-target*="text"]')||null;n.innerHTML=t||e.dataset.loadingText}function r(e,t){e?Object(o.b)(t,Object(_.c)(t,"permissions_error")):Object(o.c)(t)}function c(){var e=a.a.get("primer_for_post_login_cookie");return!(!e||!e.includes("follow_after_login"))}function l(){return"registration"===a.a.get("social_oauth_type")}function u(e){return"text/javascript; charset=utf-8"===e.headers["content-type"]}function f(){a.a.remove("social_oauth_type")}},511:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FacebookLogin}));var scriptjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(74),scriptjs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(scriptjs__WEBPACK_IMPORTED_MODULE_0__),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),lib_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),js_cookie__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),js_cookie__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_3__),components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),components_analytics_conversions_constants_actions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(51);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var FacebookLogin=function(){function FacebookLogin(e){var t=this,n=e.buttonTarget,o=e.textTarget,_=void 0===o?null:o,i=e.csrfToken,a=e.omniauthToken;_classCallCheck(this,FacebookLogin),this.loadFacebookApi=function(){window.FB.init({appId:t.buttonTarget.dataset.appId,autoLogAppEvents:!0,cookie:!0,status:!0,xfbml:!1,version:"v3.2"}),t.buttonTarget.dataset.loaded="true"},this.handleFacebookResponse=function(){axios__WEBPACK_IMPORTED_MODULE_1___default.a.defaults.headers.common["X-CSRF-Token"]=t.csrfToken,axios__WEBPACK_IMPORTED_MODULE_1___default.a.post(t.buttonTarget.dataset.omniauthPath,t.formDataForAjaxPost,{withCredentials:!0}).then((function(e){t.responseSuccess(e)})).catch(t.handleError)},this.responseSuccess=function(e){200===e.status||204===e.status?t.processResponse(e):t.handleError(e.error),Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.b)()},this.loginReject=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.textTarget&&Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.f)(t.buttonTarget,t.originalText),Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.d)(e,t.buttonTarget),e&&(t.authType="rerequest")},this.handleError=function(e){e&&console.error(e),t.textTarget&&Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.f)(t.buttonTarget,t.originalText),Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.d)(!0,t.buttonTarget)},this.buttonTarget=n,this.textTarget=_,this.csrfToken=i,this.omniauthToken=a,this.connectType=n.getAttribute("data-oauth-type"),this.handleFacebookResponse=this.handleFacebookResponse.bind(this),this.handleError=this.handleError.bind(this),this.init()}return _createClass(FacebookLogin,[{key:"init",value:function(){Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.d)(!1,this.buttonTarget),this.authType="reauthorize",scriptjs__WEBPACK_IMPORTED_MODULE_0___default()("https://connect.facebook.net/en_US/sdk.js",this.loadFacebookApi)}},{key:"connect",value:function(){var e=this,t=document.getElementById("user_newsletter"),n=!1;null!==t&&"hidden"!==t.type?n=t.checked:null!==t&&"hidden"===t.type&&(n=!0);var o=this.buttonTarget.dataset.omniauthPath,_="".concat(o,"/callback?newsletter=").concat(n,"&state=").concat(this.omniauthToken);this.buttonTarget.dataset.omniauthPath=_,this.textTarget&&(this.originalText=this.textTarget.innerHTML,Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.f)(this.buttonTarget)),this.login().then((function(){e.validate().then((function(){e.handleFacebookResponse()}),(function(){e.loginReject(!0)}))}),(function(){e.loginReject()}))}},{key:"formDataForAjaxPost",get:function(){var e=new FormData;return e.append("authenticity_token",this.csrfToken),e}},{key:"processResponse",value:function processResponse(response){if(Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.a)())return Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.c)(response)&&eval(response.data),void Object(components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_4__.l)({action:components_analytics_conversions_constants_actions__WEBPACK_IMPORTED_MODULE_5__.W,category:Object(components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_4__.e)(this.buttonTarget),label:"Sign_Up-Facebook",dataLayerCompleteAttrs:["email_address","email_hash_md5","email_hash_sha1","sign_in_type"]});Object(components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_4__.l)({action:components_analytics_conversions_constants_actions__WEBPACK_IMPORTED_MODULE_5__.kb,category:Object(components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_4__.e)(this.buttonTarget),label:"Sign_In-Facebook",dataLayerCompleteAttrs:["email_address","email_hash_md5","email_hash_sha1","sign_in_type","name","country","postal_code","team_owner_email","team_seats","multiple_logins"]}),this.fromFollow?window.location.reload():"login_in_place"===response.data.message?Object(lib_helpers__WEBPACK_IMPORTED_MODULE_2__.Q)("LoggedInPlace"):js_cookie__WEBPACK_IMPORTED_MODULE_3___default.a.get("sign_in_referrer")?window.location.assign(js_cookie__WEBPACK_IMPORTED_MODULE_3___default.a.get("sign_in_referrer")):window.location.reload()}},{key:"fromFollow",get:function(){return Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_6__.e)()}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){window.FB.login((function(e){"connected"===e.status?t():n()}),{scope:"public_profile,email",auth_type:e.authType})}))}},{key:"validate",value:function(){return new Promise((function(e,t){window.FB.api("/me/permissions",(function(n){n.data.forEach((function(e){"email"===e.permission&&"granted"!==e.status&&t(),"public_profile"===e.permission&&"granted"!==e.status&&t()})),e()}))}))}}]),FacebookLogin}()},512:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GoogleLogin}));var scriptjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(74),scriptjs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(scriptjs__WEBPACK_IMPORTED_MODULE_0__),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),js_cookie__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),js_cookie__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_2__),lib_helpers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(51),components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),components_analytics_conversions_constants_actions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var GoogleLogin=function(){function GoogleLogin(e){var t=this,n=e.buttonTarget,o=e.textTarget,_=void 0===o?null:o,i=e.csrfToken,a=e.omniauthToken;_classCallCheck(this,GoogleLogin),this.loadGoogleApi=function(){window.gapi.load("auth2"),t.buttonTarget.dataset.loaded="true"},this.responseSuccess=function(e){200===e.status||204===e.status?t.processResponse(e):t.handleError(e.error),Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.b)()},this.handleError=function(e){e&&console.error(e),t.textTarget&&Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.f)(t.buttonTarget,t.originalText),Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.d)(!0,t.buttonTarget)},this.buttonTarget=n,this.textTarget=_,this.csrfToken=i,this.omniauthToken=a,this.handleGoogleResponse=this.handleGoogleResponse.bind(this),this.handleError=this.handleError.bind(this),this.init()}return _createClass(GoogleLogin,[{key:"init",value:function(){Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.d)(!1,this.buttonTarget),scriptjs__WEBPACK_IMPORTED_MODULE_0___default()("https://apis.google.com/js/platform.js",this.loadGoogleApi)}},{key:"connect",value:function(){this.textTarget&&(this.originalText=this.textTarget.innerHTML,Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.f)(this.buttonTarget)),Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.d)(!1,this.buttonTarget),this.login()}},{key:"login",value:function(){window.gapi.auth2.authorize({client_id:this.buttonTarget.dataset.appId,cookie_policy:"single_host_origin",scope:"email profile",response_type:"code"},this.handleGoogleResponse)}},{key:"handleGoogleResponse",value:function(e){if(e&&!e.error){var t=document.getElementById("user_newsletter"),n=!1;null!==t&&"hidden"!==t.type?n=t.checked:null!==t&&"hidden"===t.type&&(n=!0),axios__WEBPACK_IMPORTED_MODULE_1___default.a.defaults.headers.common["X-CSRF-Token"]=this.csrfToken,axios__WEBPACK_IMPORTED_MODULE_1___default.a.post("/users/auth/google_oauth2/callback?state=".concat(this.omniauthToken,"&newsletter=").concat(n),e).then(this.responseSuccess).catch(this.handleError)}else this.handleError(null===e||void 0===e?void 0:e.error)}},{key:"processResponse",value:function processResponse(response){if(Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.a)())return Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.c)(response)&&eval(response.data),void Object(components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_5__.l)({action:components_analytics_conversions_constants_actions__WEBPACK_IMPORTED_MODULE_6__.W,category:Object(components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_5__.e)(this.buttonTarget),label:"Sign_Up-Google",dataLayerCompleteAttrs:["email_address","email_hash_md5","email_hash_sha1","sign_in_type"]});Object(components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_5__.l)({action:components_analytics_conversions_constants_actions__WEBPACK_IMPORTED_MODULE_6__.kb,category:Object(components_analytics_conversions_tracking__WEBPACK_IMPORTED_MODULE_5__.e)(this.buttonTarget),label:"Sign_In-Google",dataLayerCompleteAttrs:["email_address","email_hash_md5","email_hash_sha1","sign_in_type","name","country","postal_code","team_owner_email","team_seats","multiple_logins"]}),this.fromFollow?window.location.reload():"login_in_place"===response.data.message?Object(lib_helpers__WEBPACK_IMPORTED_MODULE_3__.Q)("LoggedInPlace"):js_cookie__WEBPACK_IMPORTED_MODULE_2___default.a.get("sign_in_referrer")?window.location.assign(js_cookie__WEBPACK_IMPORTED_MODULE_2___default.a.get("sign_in_referrer")):window.location.reload()}},{key:"fromFollow",get:function(){return Object(lib_social_session_helpers__WEBPACK_IMPORTED_MODULE_4__.e)()}}]),GoogleLogin}()},771:function(e,t,n){},772:function(e,t,n){"use strict";n.r(t);n(773),n(410)},773:function(e,t,n){},774:function(e,t,n){},775:function(e,t,n){},776:function(e,t,n){},777:function(e,t,n){e.exports=n.p+"media/components/sessions/registration-form/img/gauge_Icon_2-e92fa19cf387d7e0a57d6468daed3332.svg"},778:function(e,t,n){"use strict";n.r(t);n(779)},779:function(e,t,n){}}]);
//# sourceMappingURL=67-0f40f0c55b8c6b81de0c.chunk.js.map