(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{1308:function(e,t,n){"use strict";n.r(t);var r=n(4),o=n(11),a=n(9),c=n.n(a);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,n,r,o=l(a);function a(){return i(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"connect",value:function(){this.sendBeaconIfNecessary()}},{key:"sendBeaconIfNecessary",value:function(){if(window.aBDetected&&!c.a.get("aBDetected")){c.a.set("aBDetected",!0);var e=new FormData;e.append(this.csrfParam,this.csrfToken),e.append("eventAction","AdBlocker"),e.append("eventCategory",document.body.dataset.conversionsCategory),e.append("nonInteractive",!0),window.navigator.sendBeacon(this.trackingUrl,e)}}},{key:"trackingUrl",get:function(){return this.element.dataset.abDetectionUrl}},{key:"csrfParam",get:function(){var e=document.querySelector("meta[name=csrf-param]");return e?e.content:null}},{key:"csrfToken",get:function(){var e=document.querySelector("meta[name=csrf-token]");return e?e.content:null}}])&&s(t.prototype,n),r&&s(t,r),a}(o.a),h=n(13),v=n(14);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,e);var t,n,r,o=m(a);function a(){var e;y(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).sendEvent=function(e){window.dataLayer.push({event:e.type})},e}return t=a,(n=[{key:"connect",value:function(){this.removeGTMListeners(),this.registerGTMListeners()}},{key:"disconnect",value:function(){this.removeGTMListeners()}},{key:"registerGTMListeners",value:function(){window.addEventListener(v.a.turbolinks.load,this.sendEvent,{once:!1})}},{key:"removeGTMListeners",value:function(){window.removeEventListener(v.a.turbolinks.load,this.sendEvent,{once:!1})}}])&&b(t.prototype,n),r&&b(t,r),a}(h.b),O=n(6),j=n(2);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,o=D(a);function a(){return S(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"track",value:function(e){var t={action:this.trackActionValue};this.hasTrackLabelValue&&(t.label=this.trackLabelValue),this.hasTrackValueValue&&(t.value=this.trackValueValue),Object.assign(t,this.processIncludedData());var n={data:t};this.sendFromElementValue&&(n.element=e.target),Object(O.k)(n),Object(j.o)("dev")&&this.deprecationWarning(this.trackActionValue,this.element)}},{key:"trackComplete",value:function(e){Object(O.l)({action:this.completeActionValue,category:Object(O.d)(e.target)}),Object(j.o)("dev")&&this.deprecationWarning(this.completeActionValue,this.element)}},{key:"deprecationWarning",value:function(e,t){console.warn("This tracker is deprecated. Please upgrade ".concat(e," to use Track Event Controller or Track Complete Event Controller. Target:"),t)}},{key:"processIncludedData",value:function(){var e=this;if(!this.hasIncludeDataValue)return{};var t={};return this.includeDataValue.split(",").map((function(e){return e.trim()})).forEach((function(n){t[n]=e.element.dataset[n]})),t}}])&&E(t.prototype,n),r&&E(t,r),a}(o.a);B.values={trackAction:String,completeAction:String,trackLabel:String,trackValue:String,includeData:String,sendFromElement:{type:Boolean,default:!0}};class R extends o.a{connect(){if(!this.hasActionValue)return;const e={action:this.actionValue};this.hasLabelValue&&(e.label=this.labelValue),this.hasValueValue&&(e.value=this.valueValue),Object.assign(e,this.processIncludedData());const t={data:e};!0!==this.sendFromBodyValue&&(t.element=this.element),Object(O.k)(t)}processIncludedData(){if(!this.hasIncludeDataValue)return{};const e={};return this.includeDataValue.split(",").map(e=>e.trim()).forEach(t=>{e[t]=this.element.dataset[t]}),e}}R.values={action:String,label:String,value:String,includeData:String,sendFromBody:{type:Boolean,default:!1}};class C extends o.a{track(e){const{action:t,label:n,value:r,sendFromBody:o=!1,...a}=e.params;if(void 0===t)return;const c={action:t};void 0!==n&&(c.label=n),void 0!==r&&(c.value=r),Object.assign(c,a);const i={data:c};!0!==Object(j.z)(o)&&(i.element=e.currentTarget),Object(O.k)(i)}}class F extends o.a{track(e){const{action:t,category:n,label:r,value:o,...a}=e.params;if(void 0===t)return;const c={action:t};void 0!==r&&(c.label=r),void 0!==o&&(c.value=o),c.category=void 0===n?Object(O.d)(e.target):n,Object.assign(c,a),Object(O.l)(c)}}var A=n(8);class L extends o.a{constructor(){super(...arguments),this.sendFormFieldFocusEvent=e=>{const t=e.currentTarget.dataset.englishLabel;Object(O.k)({element:e.currentTarget,data:{action:A.R,category:Object(O.d)(e.currentTarget),label:"Field-"+t}})},this.sendFormFieldErrorEvent=e=>{const t=e.dataset.englishLabel;Object(O.k)({element:e,data:{action:A.Q,label:"Field-"+t,category:Object(O.d)(e),error_trigger:"Error-Submission"}})}}connect(){this.hasErrorFieldTarget&&this.errorFieldTargets.forEach(e=>{this.sendFormFieldErrorEvent(e)})}}L.targets=["errorField"];class x extends o.a{connect(){}track(){const e=this.clickFormData();window.navigator.sendBeacon("/api/v2/tracking/clicks",e)}trackAnalytics(){const e=Object(j.H)(this.element.dataset.eventType,v.a);Object(j.Q)(e,{})}clickFormData(){const e=new FormData;e.append(this.csrfParam,this.csrfToken);for(let t=0;t<this.element.attributes.length;t+=1){const n=this.element.attributes[t];if(n.name.match(/^data-/)){const t=n.name.replace("data-","").replace("-","_");["controller","action"].includes(t)||e.append(t,n.value)}}return e}normalizeParamName(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var t,n,r,o=J(a);function a(){var e;M(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).sendSearchClick=function(t){var n=e.searchClickData(t);e.sendBeacon("/api/v2/tracking/search/clicks",n),window.localStorage.setItem("resource-".concat(t.detail.resourceId),JSON.stringify(n))},e.sendSponsoredSearchClick=function(t){var n=e.searchSponsoredClickData(t);e.sendBeacon("/api/v2/tracking/search/sponsored_clicks",n)},e.sendSearchDownload=function(t){var n=e.searchDownloadData(t);n&&e.sendBeacon("/api/v2/tracking/search/downloads",n)},e}return t=a,(n=[{key:"connect",value:function(){Object(j.s)()||(window.addEventListener(v.a.search.click,this.sendSearchClick),window.addEventListener(v.a.search.sponsored_click,this.sendSponsoredSearchClick),window.addEventListener(v.a.download_btn.initial_click,this.sendSearchDownload)),this.sendPageView()}},{key:"disconnect",value:function(){window.removeEventListener(v.a.search.click,this.sendSearchClick),window.removeEventListener(v.a.search.sponsored_click,this.sendSponsoredSearchClick),window.removeEventListener(v.a.download_btn.initial_click,this.sendSearchDownload)}},{key:"sendBeacon",value:function(e,t){if("test"===document.body.getAttribute("data-env")){var n=c.a.getJSON("searchEventsSent")||[];return n.push({url:e,data:t}),void c.a.set("searchEventsSent",n,{domain:".example.com"})}var r=new FormData;r.append(this.csrfParam,this.csrfToken),Object.keys(t).forEach((function(e){r.append(e,t[e])})),window.navigator.sendBeacon(e,r)}},{key:"sendPageView",value:function(){Object(j.e)("search_tracking")&&this.isSearchResultsPage&&(Object(j.s)()||this.sendBeacon("/api/v2/tracking/search/pageviews",this.pageViewData))}},{key:"csrfParam",get:function(){var e=document.querySelector("meta[name=csrf-param]");return e?e.content:null}},{key:"csrfToken",get:function(){var e=document.querySelector("meta[name=csrf-token]");return e?e.content:null}},{key:"isSearchResultsPage",get:function(){return!(!document.querySelector("[data-search-results-count]")||document.querySelector("#resource-show-modal-view"))}},{key:"pageViewData",get:function(){var e=this,t={};return["actual_free_results_shown_count","actual_pro_results_shown_count","algo_version","content_type","domain","filters_used","filter_params_json","guid","ignore","internal","locale","max_free_results_shown_count","max_pro_results_shown_count","page","pageview_guid","pro","referrer","results_count","split_test_name","split_test_variant","term","total_free_results","total_pro_results","type","user_guid","browser_language"].forEach((function(n){t[n]=e.element.getAttribute("data-search-".concat(n.replace(/_/g,"-")))||""})),t}},{key:"searchClickData",value:function(e){var t=this.pageViewData;return t.resource_id=e.detail.resourceId,t.resource_position=e.detail.resourcePosition,t.resource_pro=e.detail.resourcePro,t}},{key:"searchSponsoredClickData",value:function(e){var t=this.pageViewData;return t.resource_id=e.detail.resourceId,t.resource_position=e.detail.resourcePosition,t.resource_pro=e.detail.resourcePro,t.sponsored=e.detail.sponsored,t}},{key:"searchDownloadData",value:function(e){if(!e.detail.guid)return null;var t={};return Object.entries(e.detail).forEach((function(e){var n=I(e,2),r=n[0],o=n[1];t[r]=o})),t}}])&&G(t.prototype,n),r&&G(t,r),a}(h.b);r.default.register("ab-detection",p),r.default.register("google-tag-manager",_),r.default.register("event-tracker",B),r.default.register("track-trigger-event",R),r.default.register("track-event",C),r.default.register("track-complete-event",F),r.default.register("form-analytics",L),r.default.register("click-track",x),r.default.register("search-analytics",z)}}]);
//# sourceMappingURL=95-4f944bb9a1ee07c0ec46.chunk.js.map