(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{1343:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r(9),i=r.n(a),o=r(11),s=r(14),c=r(2),l=r(80);class u extends o.a{constructor(){super(...arguments),this.applySearchFilters=e=>{this.resetContentType(e),i.a.set("ezSearchType","internal"),window.EezyScrollPositionHelper.preservePositionOnce();const t=this.searchState.getFlatQueryString(),r=this.unverifiedPath||this.changingContentType()?this.getNewSearchUrl(this.searchRoute,this.searchTerm,t):`${window.location.pathname}${t}`;window.Turbolinks.visit(r)},this.postAjaxEvent=e=>{this.postAjax(e.detail.dataHash)},this.searchPaginationEvent=e=>{Object(c.Q)("PaginationChanged",{page:e.detail.page,stateKey:"search-state",extraStates:["filterState"],ajaxEventName:"PostSearchAjax",resultsTarget:document.querySelector(".search-results")})},this.performSearch=e=>{const{searchPath:t}=e.detail,r=e.detail.searchRoute?e.detail.searchRoute:this.searchRoute,n=this.normalizeTerm(e.detail.term);this.resetContentType(e);const a=e.detail.useSearchState?this.searchState.getFlatQueryString().substring(1):null,i=t||this.getNewSearchUrl(r,n,a);!0===e.detail.searchInNewTab?window.open(i,"_blank"):window.Turbolinks.visit(i)},this.resetContentType=e=>{this.contentType=e.detail.contentType||this.contentType,e.detail.contentType&&i.a.set("content_type",e.detail.contentType),this.changingContentType()&&(this.searchState.resetStateToDefault(),Object(c.O)("remove_apply_filters_mobile")||Object(c.Q)("search:reset_hidden_filters"))},this.postAjax=e=>{this.searchState.updateStateValue("page",e.page);const t=this.searchState.getFlatQueryString(),r=this.getNewSearchUrl(this.searchRoute,this.searchTerm,t);this.searchType&&i.a.set("ezSearchType",this.searchType),window.location.assign(r)},this.trackSearchClick=e=>{const t=e.target.closest(".search-results .ez-search-results .ez-resource-grid__item");t&&Object(c.Q)(s.a.search.click,{resourceId:t.getAttribute("data-item-id"),resourcePosition:t.getAttribute("data-position"),resourcePro:t.getAttribute("data-pro"),searchTerm:this.searchTerm})},this.trackSponsoredSearchClick=e=>{const t=e.target.closest(".search-results .ez-sponsored-results .ez-resource-grid__item");t&&Object(c.Q)(s.a.search.sponsored_click,{resourceId:t.getAttribute("data-item-id"),resourcePosition:t.getAttribute("data-index"),resourcePro:"",searchTerm:this.searchTerm,sponsored:!0})}}connect(){this.searchState=new l.a,this.searchFormInput=document.querySelector('[data-search-form-target="input"]'),this.searchFormInput&&(this.contentType=this.searchFormInput.getAttribute("data-content-type"),window.location.href.indexOf("/free-png/")>-1&&(this.contentType="png")),window.addEventListener("PostSearchAjax",this.postAjaxEvent),window.addEventListener("SearchPaginationChange",this.searchPaginationEvent),window.addEventListener("Searched",this.performSearch),window.addEventListener("click",this.trackSearchClick),window.addEventListener("click",this.trackSponsoredSearchClick),window.addEventListener(s.a.search.apply_filters,this.applySearchFilters),window.addEventListener(s.a.search.update_content_type,this.resetContentType)}disconnect(){window.removeEventListener("PostSearchAjax",this.postAjaxEvent),window.removeEventListener("SearchPaginationChange",this.searchPaginationEvent),window.removeEventListener("Searched",this.performSearch),window.removeEventListener("click",this.trackSearchClick),window.removeEventListener("click",this.trackSponsoredSearchClick),window.removeEventListener(s.a.search.apply_filters,this.applySearchFilters),window.removeEventListener(s.a.search.update_content_type,this.resetContentType)}changingContentType(){return this.contentType!==this.searchFormInput.getAttribute("data-content-type")}toggleSearchFilters(){const e=new CustomEvent("search:toggle_search_filters");window.dispatchEvent(e)}getNewSearchUrl(e,t,r){const n=e,a=[];return e===this.searchRoute&&a.push("qterm="+t,"content_type="+this.contentType),r&&r.replace(/^\?/,"").split("&").forEach(e=>{a.push(e)}),a.length>0?`/${n}?${a.join("&")}`:n}footerPagerChange(e){e.preventDefault();const t=document.querySelector('[data-ez-num-pager-target="currentPage"]'),r=Object(c.i)(t)+1;Object(c.Q)("SearchPaginationChange",{page:r})}normalizeTerm(e){return encodeURIComponent(e.toLowerCase().trim().replace(/ /g,"-"))}get searchRoute(){return this.searchFormInput?this.searchFormInput.getAttribute("data-search-route"):"search"}get searchTerm(){const e=this.element.querySelector("[data-search-term]");return e?e.getAttribute("data-search-term"):""}get searchType(){const e=this.element.querySelector("[data-search-type]");return e?e.getAttribute("data-search-type"):null}get unverifiedPath(){return window.location.pathname==="/"+this.searchRoute}}var h=r(91),p=r(211),d=r(6),g=r(8);function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var a=w(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=new l.a;k.addPopStateListener();var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,r,n,a=b(o);function o(){var e;v(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).navigationKeyCodes=["ArrowUp","ArrowLeft","ArrowRight","ArrowDown","Enter"],e.exclusionKeyCodes=["MetaLeft","MetaRight","ControlLeft","ControlRight","AltLeft","AltRight","ShiftLeft","ShiftRight"],e.wrapperToggleClasses=["inline-filters","inline-filters__arrow","inline-filters__current"],e.focusSearchField=function(t){t.target===t.currentTarget&&e.inputTarget.focus()},e.scrollToSearch=function(){if(e.isMobile()&&Object(c.p)()){var t=e.inputTarget.getBoundingClientRect().top+window.scrollY-20;Object(c.N)(t)}},e.updateSearchSwatch=function(t){var r=t.detail.color;e.searchFormColorSwatches.forEach((function(e){e.parentElement.classList.add("ez-search-form__searched-color--active"),e.style.backgroundColor="#".concat(r)}))},e.resetColorSwatchFilter=function(){e.searchFormColorSwatches.forEach((function(e){e.parentElement.classList.remove("ez-search-form__searched-color--active"),e.style.backgroundColor=""})),Object(c.Q)("resetColorSwatchFilter")},e.resizeInput=function(){e.inputTarget.value?e.hiddenInputHolderTarget.textContent=e.inputTarget.value:(e.inputTarget.placeholder=e.savedPlaceholder||e.inputTarget.placeholder,e.inputTarget.setAttribute("aria-label",e.savedPlaceholder||e.inputTarget.placeholder),e.hiddenInputHolderTarget.textContent=e.inputTarget.placeholder),e.inputTarget.style.width="".concat(e.hiddenInputWidth||1,"px"),Object(c.t)()&&e.repositionColorSwatch()},e.repositionColorSwatch=function(){e.searchFormColorSwatches.forEach((function(t){t.parentElement.style.left="".concat(e.hiddenInputWidth||1,"px")}))},e.handleInputClick=function(){e.inputTarget.value.length>=2&&e.queryAutocomplete(e.inputTarget.value)},e.removeAutoFocus=function(){e.element.classList.remove("is-auto-focused")},e.setTogglesFromState=function(){var t=k.getRawParamKeys();f(e.element.querySelectorAll(".ez-input--checkbox input")).forEach((function(r){var n=r.closest(".ez-input--checkbox").getAttribute("data-filter-param");t.includes(n)&&e.setActiveFilter(r)}))},e.handleFilterClick=function(t){e.wrapperToggleClasses.forEach((function(r){t.target.classList.contains(r)&&e.toggleInlineFilters()}))},e.setActiveFilter=function(t){var r=f(e.element.querySelectorAll("input")),n=t.closest(".inline-filters__item");r.forEach((function(e){e.checked=!1})),t.checked=!0,Object(c.l)()<=635?(e.currentLabelTarget.innerHTML="",e.currentLabelTarget.appendChild(n.querySelector("svg").cloneNode(!0))):e.currentLabelTarget.textContent=n.dataset.selected,e.inputTarget.placeholder=n.dataset.searchSelected,e.inputTarget.setAttribute("aria-label",n.dataset.searchSelected),e.hasPopularSearchesLinkTarget&&(e.popularSearchesLinkTarget.href=n.dataset.popularSearchPath,e.popularSearchesLinkTarget.textContent=n.dataset.popularSearchText,e.popularSearchesLinkTarget.setAttribute("data-english-label",n.dataset.englishLabel)),Object(c.Q)(s.a.search.update_content_type,{contentType:t.value})},e.handleFilterOptionClick=function(t){e.setActiveFilter(t.target),k.omittedFromState(t.target.getAttribute("name"))||k.updateParamKey("".concat(t.target.getAttribute("name"),"-").concat(t.target.getAttribute("value"))),e.toggleInlineFilters(),document.body.classList.contains("searches-show")?Object(c.s)()?Object(c.G)("content_type",t.target.value):k.omittedFromState(t.target.getAttribute("name"))?Object(c.Q)(s.a.search.apply_filters,{contentType:t.target.value}):e.submit(t):(e.updateContentType(t.target.value),e.autoFocusSearchForm())},e.handlePopularSearchesLinkClick=function(t){e.trackPopularSearchClick(t)},e.toggleInlineFilters=function(){e.inlineFiltersTarget.classList.toggle("is-open")},e.blurInlineFilters=function(t){e.inlineFiltersTarget.classList.contains("is-open")&&!t.target.closest(".ez-search-form .inline-filters")&&e.toggleInlineFilters()},e.handleInputKeyUp=function(t){e.exclusionKeyCodes.includes(t.code)||e.navigationKeyCodes.includes(t.code)||e.checkAndToggleIsTyped(),Object(c.t)()&&e.searchFormColorSwatches.forEach((function(e){""!==e.style.backgroundColor&&setTimeout((function(){e.parentElement.classList.add("ez-search-form__searched-color--active")}),600)})),e.navigationKeyCodes.includes(t.code)&&document.querySelector(".ez-search-form__suggestions li")?e.navigateSuggestions(t.code):!e.exclusionKeyCodes.includes(t.code)&&e.inputTarget.value.length>=2?e.queryAutocomplete(e.inputTarget.value):""!==e.autocompleteSuggestionsTarget.innerHTML&&e.resetAutocomplete()},e.handleInputKeyDown=function(t){t.metaKey&&"Enter"===t.code&&e.submit(t)},e.handleSuggestionClick=function(t){e.inputTarget.value=t.currentTarget.textContent,e.submit(t),e.trackAutoSuggestSearch(t)},e.navigateSuggestions=function(t){var r=e.autocompleteSuggestionsTarget,n=r.querySelector("li.is-active"),a=e.previousSearchTermsTarget,i=a.querySelector("li.is-active"),o=function(t){var r=document.querySelector(".ez-search-form__suggestions-wrapper").querySelector("li.is-active");r&&r.classList.remove("is-active"),t&&(t.classList.add("is-active"),e.inputTarget.value=t.textContent)},s=function(t){e.previousSearchesTarget.classList.contains("is-hidden")?o("navDown"===t?r.querySelector("li:first-of-type"):r.querySelector("li:last-of-type")):o(a.querySelector("li:first-of-type"))};"ArrowUp"===t?i?o(r.querySelector("li:last-of-type")):n&&n.previousSibling?o(n.previousSibling):s("navUp"):"ArrowDown"===t?n&&n.nextSibling?o(n.nextSibling):n&&!n.nextSibling?s("navDown"):o(r.querySelector("li:first-of-type")):"ArrowRight"===t?i&&(i.nextElementSibling&&(Object(c.l)()<=750||i.getBoundingClientRect().top===i.nextElementSibling.getBoundingClientRect().top)?o(i.nextElementSibling):o(a.querySelector("li:first-of-type"))):"ArrowLeft"===t?function(){if(i)if(i.previousElementSibling)o(i.previousElementSibling);else if(Object(c.l)()<=750)o(a.querySelector("li:last-of-type"));else{var e,t=i.getBoundingClientRect().top;a.querySelectorAll("li").forEach((function(r){return r.getBoundingClientRect().top===t&&(e=r,!0)})),o(e)}}():"Enter"===t&&e.resetAutocomplete()},e.resetAutocomplete=function(){e.data.set("lastTerm",""),e.autocompleteSuggestionsTarget.innerHTML="",e.formTarget.classList.remove("is-suggesting")},e.queryAutocomplete=function(t){if(t!==e.data.get("lastTerm")){e.data.set("lastTerm",e.inputTarget.value);var r=new XMLHttpRequest,n=e.inputTarget.getAttribute("data-content-type");r.open("GET","".concat(e.autocompleteUrl,"?term=").concat(encodeURI(t),"&content_type=").concat(n),!0),r.setRequestHeader("Content-Type","text/plain"),r.onload=function(){try{e.renderAutocomplete(JSON.parse(r.response),t)}catch(n){}},r.send()}},e}return t=o,(r=[{key:"connect",value:function(){window.EezyStickyScrollPositionHelper||(window.EezyStickyScrollPositionHelper=p.a),this.autocompleteUrl=this.inputTarget.dataset.autocompleteSource,this.isMobile()||this.autoFocusSearchForm(),!this.isMobile()&&window.EezyScrollPositionHelper&&window.EezyScrollPositionHelper.allowFocus()&&window.EezyScrollPositionHelper.resetScrollPosition(),Object(c.t)()&&(this.searchFormColorSwatches=document.querySelectorAll('[data-search-form-target="searchedColor"]'),window.addEventListener("updateEzSearchFormColorSwatch",this.updateSearchSwatch)),this.hasInlineFiltersTarget&&this.setupInlineFilters(),this.checkAndToggleIsTyped(),this.inputTarget.classList.add("is-ready"),Object(c.p)()&&this.clearSearchFiltersHidden(),this.inputTarget.addEventListener("blur",this.resizeInput),this.inputTarget.addEventListener("keyup",this.resizeInput),this.inputTarget.addEventListener("keydown",this.resizeInput),this.inputTarget.addEventListener("click",this.removeAutoFocus),this.inputTarget.addEventListener("blur",this.removeAutoFocus),this.inputTarget.addEventListener("keydown",this.removeAutoFocus),this.inputTarget.value&&this.resizeInput();var e=window.localStorage.getItem("previous_searches");e?this.setPreviousSearches(e):this.previousSearchesTarget.classList.add("is-hidden"),this.inputTarget.addEventListener("click",this.handleInputClick),this.flagLoaded(),this.trackSitelinksSearch()}},{key:"disconnect",value:function(){document.removeEventListener("click",this.blurInlineFilters),this.inputTarget.removeEventListener("blur",this.resizeInput),this.inputTarget.removeEventListener("keyup",this.resizeInput),this.inputTarget.removeEventListener("keydown",this.resizeInput),this.inputTarget.removeEventListener("click",this.removeAutoFocus),this.inputTarget.removeEventListener("blur",this.removeAutoFocus),this.inputTarget.removeEventListener("keydown",this.removeAutoFocus),window.removeEventListener("updateEzSearchFormColorSwatch",this.updateSearchSwatch),this.inputTarget.removeEventListener("click",this.handleInputClick)}},{key:"setupInlineFilters",value:function(){this.setLandingPageInlineFilterDefaults(),document.addEventListener("click",this.blurInlineFilters)}},{key:"hiddenInputWidth",get:function(){return Math.ceil(this.hiddenInputHolderTarget.getBoundingClientRect().width)}},{key:"clearSearchFiltersHidden",value:function(){i.a.remove("ezSearchFiltersHidden")}},{key:"autoFocusSearchForm",value:function(){var e=this.inputTarget.value;this.inputTarget.value="",this.inputTarget.focus(),this.inputTarget.value=e,this.element.classList.add("is-auto-focused")}},{key:"setLandingPageInlineFilterDefaults",value:function(){document.body.classList.contains("resource-landing")?k.resetStateToDefault():this.setTogglesFromState()}},{key:"clearPreviousSearches",value:function(){this.previousSearchesTarget.classList.add("is-hidden"),window.localStorage.removeItem("previous_searches")}},{key:"setPreviousSearches",value:function(e){for(var t=JSON.parse(e),r=0;r<t.length;r+=1){var n=JSON.parse(t[r]),a='\n        <li class="ez-btn ez-btn--light ez-btn--small" data-action="click->search-form#handleSuggestionClick"\n            data-content-type="'.concat(n.contentType,'">').concat(n.term,"</li>");this.previousSearchTermsTarget.insertAdjacentHTML("beforeend",a)}}},{key:"handlePreviousClickBlur",value:function(e){e.preventDefault()}},{key:"updateContentType",value:function(e){this.inputTarget.setAttribute("data-content-type",e),Object(c.Q)(s.a.search.update_content_type,{contentType:e})}},{key:"trackPopularSearchClick",value:function(e){var t=this.inputTarget.getAttribute("data-content-type"),r=e.target.getAttribute("data-english-label");Object(d.k)({element:e.target,data:{action:g.xb,label:"Link-".concat(r),content_type:"Content-".concat(t)}})}},{key:"checkAndToggleIsTyped",value:function(){this.searchInputContents?this.element.classList.add("is-typed"):this.element.classList.remove("is-typed")}},{key:"renderAutocomplete",value:function(e,t){var r=this;this.autocompleteSuggestionsTarget.innerHTML="",this.formTarget.classList.add("is-suggesting"),!e.length>0?this.resetAutocomplete():Object.keys(e).forEach((function(n){var a=document.createElement("LI"),i=t.toLowerCase();e[n].indexOf(i)>=0?a.innerHTML=e[n].replace(i,"<strong>".concat(i,"</strong>")):a.innerHTML=e[n],a.dataset.action="mousedown->search-form#handleSuggestionClick",r.autocompleteSuggestionsTarget.appendChild(a)}))}},{key:"isMobile",value:function(){return document.body.classList.contains("is-mobile")}},{key:"resetPagination",value:function(){k.updateStateValue("page",1)}},{key:"submitViaButton",value:function(e){e.preventDefault(),this.submit(e)}},{key:"submit",value:function(e){if(!this.element.hasAttribute("data-disable-form-submit")){this.resetPagination();var t={term:this.inputTarget.value,searchRoute:this.inputTarget.getAttribute("data-search-route"),useSearchState:!0,contentType:this.inputTarget.getAttribute("data-content-type")};e.metaKey&&e.code&&"Enter"===e.code&&(t.searchInNewTab=!0),i.a.set("ezSearchType","internal"),Object(c.Q)("Searched",t),this.savePreviousSearch(t),this.trackSearchComplete(),Object(h.b)({searchTerm:this.inputTarget.value})}}},{key:"savePreviousSearch",value:function(e){var t=JSON.parse(window.localStorage.getItem("previous_searches"));t||(t=[]);for(var r=0;r<t.length;r+=1)if(JSON.parse(t[r]).term===e.term){t.splice(r,1);break}t.unshift(JSON.stringify(e))>6&&t.pop(),window.localStorage.setItem("previous_searches",JSON.stringify(t))}},{key:"trackManualSearchClick",value:function(e){this.element.hasAttribute("data-disable-form-submit")||Object(d.k)({element:e.target,data:{action:g.Vb,label:"Terms-".concat(this.inputTarget.value),content_type:"Content-".concat(Object(c.g)())}})}},{key:"trackAutoSuggestSearch",value:function(e){Object(d.k)({element:e.target,data:{action:g.Pb,label:"Terms-".concat(this.inputTarget.value),content_type:"Content-".concat(Object(c.g)())}})}},{key:"trackSearchComplete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(d.l)({action:g.Tb,label:"".concat(e,"Terms-").concat(this.inputTarget.value),valueElementSelector:".search-results__meta__results-info",valueAttribute:"search-results-count",dimensions:{content_type:"Content-".concat(Object(c.g)())}})}},{key:"trackSitelinksSearch",value:function(){if(!this.element.parentNode.parentNode.classList.contains("ez-site-header")){var e=this.fromSitelinks;"sitelinks "===e&&this.trackSearchComplete(e)}}},{key:"resultsCount",get:function(){var e=document.querySelector("[data-search-results-count]");return e?e.getAttribute("data-search-results-count"):null}},{key:"pageNumber",get:function(){var e=Object(c.h)();return e||"1"}},{key:"searchTerm",get:function(){return this.element.getAttribute("data-search-term").replace(/ /g,"-")}},{key:"searchType",get:function(){return this.element.getAttribute("data-search-type")}},{key:"searchContentType",get:function(){return this.inputTarget.getAttribute("data-content-type")}},{key:"searchInputContents",get:function(){return this.inputTarget.value}},{key:"fromSitelinks",get:function(){var e=new URLSearchParams(window.location.search).get("referral");return e&&"sitelinks_searchbox"===e?"sitelinks ":""}}])&&y(t.prototype,r),n&&y(t,n),o}(o.a);C.targets=["form","input","submit","currentLabel","popularSearchesLink","inlineFilters","previousSearches","hiddenInputHolder","previousSearchTerms","autocompleteSuggestions"],n.default.register("ez-search",u),n.default.register("search-form",C)}}]);
//# sourceMappingURL=94-8c30fb665d61a91290ea.chunk.js.map